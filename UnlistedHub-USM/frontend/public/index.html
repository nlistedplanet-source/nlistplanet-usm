<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#0ea5e9" />
    <meta name="description" content="NList Planet - P2P Marketplace for Unlisted Shares Trading" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    
    <!-- Favicon -->
    <link rel="icon" href="%PUBLIC_URL%/favicon.png" />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/favicon.png" />
    <link rel="shortcut icon" href="%PUBLIC_URL%/favicon.png" />
    
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
    
    <!-- Firebase SDK from CDN -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-messaging-compat.js"></script>
    
    <title>Nlist Planet | Unlisted Shares Mall</title>
    
    <!-- Smart Redirect Script: Redirect mobile devices to mobile app -->
    <script>
      (function () {
        try {
          const host = window.location.hostname;
          const params = new URLSearchParams(window.location.search);
          const disableRedirect = params.get('preview') === '1' || params.get('no-redirect') === '1';

          // Skip redirect for preview/local domains
          if (host.includes('vercel.app') || host === 'localhost' || host === '127.0.0.1') {
            return;
          }

          // Robust mobile detection
          const ua = navigator.userAgent || '';
          const isTouchCapable = ('ontouchstart' in window) || (navigator.maxTouchPoints > 0);
          const isMobileUA = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(ua);
          const isSmallViewport = window.matchMedia && window.matchMedia('(max-width: 1024px)').matches;
          const isPortrait = window.matchMedia && window.matchMedia('(orientation: portrait)').matches;
          const isMobileDevice = isMobileUA || (isTouchCapable && (isSmallViewport || isPortrait));

          // Define domains
          const isProdDesktopDomain = host === 'nlistplanet.com' || host === 'www.nlistplanet.com';
          const mobileAppUrl = 'https://mobile.nlistplanet.com';
          const isAlreadyOnMobile = host === 'mobile.nlistplanet.com' || host === 'm.nlistplanet.com';

          // Redirect logic (unless bypassed)
          if (!disableRedirect && isProdDesktopDomain && !isAlreadyOnMobile) {
            // On desktop domain but using mobile device or small viewport â†’ redirect to mobile
            if (isMobileDevice || isSmallViewport) {
              window.location.href = mobileAppUrl + window.location.pathname + window.location.search;
            }
          }
        } catch (e) {
          // Fail open: never block the app from loading
          console.warn('Redirect script skipped:', e);
        }
      })();
    </script>
    
    <style>
      * {
        box-sizing: border-box;
      }
      
      body {
        margin: 0;
        padding: 0;
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
          'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
          sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
      
      #root {
        min-height: 100vh;
      }
    </style>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
  </body>
</html>
